{{- $profile := .Site.Params.home.profile -}}
<div class="home-profile">
    {{- /* 1. 头像 */ -}}
    <div class="home-avatar">
        <a href="/"><img src="{{ $profile.avatarURL | relURL }}" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover;"></a>
    </div>

    {{- /* 2. 标题 */ -}}
    <h1 class="home-title">{{- $profile.title | default .Site.Title | safeHTML -}}</h1>

    {{- /* 3. 副标题 (Subtitle) */ -}}
    {{- if $profile.subtitle -}}
        <div class="home-subtitle" style="font-size: 1.1rem; color: #666; margin-bottom: 1.5rem;">
            {{- if $profile.typeit -}}
                {{- $id := dict "Content" $profile.subtitle "Scratch" $.Scratch | partial "function/id.html" -}}
                <div id="{{ $id }}" class="typeit"></div>
                {{- dict $id (slice $id) | dict "typeitMap" | merge ($.Scratch.Get "this") | $.Scratch.Set "this" -}}
            {{- else -}}
                {{- $profile.subtitle | safeHTML -}}
            {{- end -}}
        </div>
    {{- end -}}

    {{- /* 4. 社交图标：强制手动并排 */ -}}
    <div class="links" style="display: flex; justify-content: center; align-items: center; gap: 18px;">
        
        {{- /* A. 邮箱 (主题内置) */ -}}
        {{- with .Site.Params.social.Email -}}
            {{- $socialMap := resources.Get "data/social.yml" | transform.Unmarshal -}}
            {{- $social := index $socialMap "email" | default dict -}}
            {{- $social = dict "Id" . | merge $social -}}
            {{- partial "plugin/social.html" $social -}}
        {{- end -}}

        {{- /* B. 微信 (读取 assets/svg/Wechat.svg) */ -}}
        {{- with .Site.Params.social.Wechat -}}
            {{- $wechatSvg := resources.Get "svg/Wechat.svg" -}}
            {{- if $wechatSvg -}}
                <a href="{{ .prefix }}{{ .id }}" title="微信" target="_blank" rel="noopener" class="social-icon-link">
                    <span style="display: flex; width: 2.2rem; height: 2.2rem; fill: currentColor; overflow: visible;">
                        <span style="transform: scale(1.15); display: flex;">{{- $wechatSvg.Content | safeHTML -}}</span>
                    </span>
                </a>
            {{- end -}}
        {{- end -}}

        {{- /* C. 小红书 (读取 assets/svg/xhs.svg) */ -}}
        {{- with .Site.Params.social.xhs -}}
            {{- $xhsSvg := resources.Get "svg/xhs.svg" -}}
            {{- if $xhsSvg -}}
                <a href="{{ .prefix }}{{ .id }}" title="小红书" target="_blank" rel="noopener" class="social-icon-link">
                    <span style="display: flex; width: 2.2rem; height: 2.2rem; fill: currentColor; overflow: visible;">
                        <span style="transform: scale(2.4); transform-origin: center; display: flex;">{{- $xhsSvg.Content | safeHTML -}}</span>
                    </span>
                </a>
            {{- end -}}
        {{- end -}}
    </div>
</div>

<style>
    .home-profile { text-align: center; }
    .social-icon-link { transition: transform 0.2s; }
    .social-icon-link:hover { transform: scale(1.2); }
    /* 修正内置 Email 图标大小 */
    .links .social-icon i { font-size: 2.2rem !important; }
</style>
